# ColorPop8 广告和购买系统配置指南

## 🎯 国庆假期学习计划

### 第一阶段：完善AdMob广告系统（1-2天）

#### 1. 创建AdMob账户
1. 访问 [Google AdMob](https://admob.google.com/)
2. 使用Google账户登录
3. 创建新的AdMob应用
4. 获取真实的广告单元ID

#### 2. 配置真实广告ID
在 `www/js/advertisement.js` 中替换测试ID：

```javascript
// 将这些测试ID替换为您的真实ID
this.adUnits = {
    banner: {
        test: 'ca-app-pub-3940256099942544/6300978111',
        production: 'YOUR_REAL_BANNER_AD_UNIT_ID' // 替换这里
    },
    interstitial: {
        test: 'ca-app-pub-3940256099942544/1033173712',
        production: 'YOUR_REAL_INTERSTITIAL_AD_UNIT_ID' // 替换这里
    },
    rewarded: {
        test: 'ca-app-pub-3940256099942544/5224354917',
        production: 'YOUR_REAL_REWARDED_AD_UNIT_ID' // 替换这里
    }
};
```

#### 3. 切换到生产模式
```javascript
// 在 advertisement.js 中设置
this.isTestMode = false; // 改为 false
```

#### 4. 测试广告功能
- 横幅广告：应用启动时自动显示
- 插屏广告：每3个关卡显示一次
- 激励视频：调用 `showReviveOption()` 测试

### 第二阶段：实现应用内购买（2-3天）

#### 1. 安装应用内购买插件
```bash
cordova plugin add cordova-plugin-purchase
```

#### 2. 配置Google Play Console
1. 在Google Play Console中创建应用
2. 设置应用内商品：
   - 移除广告：¥6.00
   - 游戏币包1：¥12.00 (100金币)
   - 游戏币包2：¥30.00 (300金币)
   - 高级版本：¥18.00

#### 3. 获取商品ID
在 `www/js/in-app-purchase.js` 中配置：

```javascript
this.products = {
    removeAds: {
        id: 'remove_ads', // 与Google Play Console中的ID一致
        type: 'consumable',
        price: '¥6.00',
        description: '移除所有广告'
    },
    // ... 其他商品
};
```

#### 4. 测试购买功能
- 调用 `openShop()` 打开商店
- 测试各种购买流程
- 验证购买状态保存

### 第三阶段：集成到游戏逻辑（1天）

#### 1. 关卡完成时显示插屏广告
```javascript
// 在您的游戏关卡完成函数中添加
if (window.adManager) {
    window.adManager.onLevelComplete(levelNumber);
}
```

#### 2. 游戏失败时提供复活选项
```javascript
// 在游戏失败时调用
if (window.adManager) {
    window.showReviveOption();
}
```

#### 3. 添加商店按钮到游戏界面
```html
<button onclick="openShop()" style="position: fixed; top: 10px; right: 10px;">
    商店
</button>
```

## 🔧 技术实现细节

### 广告系统功能
- ✅ 横幅广告：底部固定显示
- ✅ 插屏广告：关卡间自动显示
- ✅ 激励视频：复活、获得金币、获得提示
- ✅ 广告预加载：提升用户体验
- ✅ 智能显示：避免频繁打扰

### 购买系统功能
- ✅ 移除广告：一次性购买
- ✅ 游戏币：可重复购买
- ✅ 高级功能：解锁所有内容
- ✅ 购买恢复：重新安装后恢复
- ✅ 本地存储：离线状态保存

### 变现策略建议
1. **温和的广告策略**
   - 横幅广告：不影响游戏体验
   - 插屏广告：每3个关卡一次
   - 激励视频：提供实际价值

2. **合理的价格设置**
   - 移除广告：¥6（低门槛）
   - 游戏币：¥12-30（中等价格）
   - 高级版本：¥18（高价值）

3. **用户体验优化**
   - 购买后立即生效
   - 清晰的购买提示
   - 简单的购买流程

## 🚀 发布前检查清单

### AdMob配置
- [ ] 真实广告单元ID已配置
- [ ] 测试模式已关闭
- [ ] 广告政策合规
- [ ] 广告显示正常

### 应用内购买配置
- [ ] Google Play Console商品已创建
- [ ] 商品ID与代码一致
- [ ] 购买流程测试通过
- [ ] 购买恢复功能正常

### 游戏集成
- [ ] 广告在合适时机显示
- [ ] 购买按钮位置合理
- [ ] 购买后功能正常解锁
- [ ] 用户体验流畅

## 📱 测试方法

### 本地测试
1. 使用测试广告ID测试广告显示
2. 使用测试购买ID测试购买流程
3. 检查控制台日志确认功能正常

### 真机测试
1. 安装到Android设备
2. 测试广告加载和显示
3. 测试购买流程（需要Google Play账户）
4. 验证购买状态保存

## 💡 常见问题解决

### 广告不显示
1. 检查网络连接
2. 确认广告单元ID正确
3. 查看控制台错误信息
4. 检查AdMob账户状态

### 购买失败
1. 确认Google Play Console配置
2. 检查商品ID是否一致
3. 验证测试账户权限
4. 查看购买日志

### 性能优化
1. 广告预加载避免延迟
2. 购买状态缓存减少网络请求
3. 合理控制广告频率
4. 优化UI响应速度

## 🎉 完成后的收益预期

### 广告收入
- 横幅广告：每1000次展示约¥1-3
- 插屏广告：每次展示约¥0.1-0.5
- 激励视频：每次完成约¥0.5-2

### 购买收入
- 移除广告：转化率5-15%
- 游戏币：转化率2-8%
- 高级版本：转化率1-5%

### 预期月收入
- 1000日活用户：¥200-800/月
- 5000日活用户：¥1000-4000/月
- 10000日活用户：¥2000-8000/月

记住：变现是一个长期过程，需要不断优化用户体验和广告策略！

